<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Game_Battler</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            Game_Battler 
            
                <span class="parent">&lt; 
                    
                    <a href="Game_BattlerBase.html">Game_BattlerBase</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/Game_Battler_rb.html">Game_Battler.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>处理战斗者的类。Game_Actor 和 <a
href="Game_Enemy.html">Game_Enemy</a> 类的父类。</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-add_buff">add_buff</a>,
              </li>
            
              
              <li>
                <a href="#method-i-add_debuff">add_debuff</a>,
              </li>
            
              
              <li>
                <a href="#method-i-add_new_state">add_new_state</a>,
              </li>
            
              
              <li>
                <a href="#method-i-add_state">add_state</a>,
              </li>
            
              
              <li>
                <a href="#method-i-apply_critical">apply_critical</a>,
              </li>
            
              
              <li>
                <a href="#method-i-apply_guard">apply_guard</a>,
              </li>
            
              
              <li>
                <a href="#method-i-apply_variance">apply_variance</a>,
              </li>
            
              
              <li>
                <a href="#method-i-attack_apply">attack_apply</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-buff-3F">buff?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-buff_max-3F">buff_max?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-charge_tp_by_damage">charge_tp_by_damage</a>,
              </li>
            
              
              <li>
                <a href="#method-i-clear_actions">clear_actions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-clear_sprite_effects">clear_sprite_effects</a>,
              </li>
            
              
              <li>
                <a href="#method-i-clear_states">clear_states</a>,
              </li>
            
              
              <li>
                <a href="#method-i-clear_tp">clear_tp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-consume_item">consume_item</a>,
              </li>
            
              
              <li>
                <a href="#method-i-current_action">current_action</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-debuff-3F">debuff?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-debuff_max-3F">debuff_max?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-die">die</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-elements_max_rate">elements_max_rate</a>,
              </li>
            
              
              <li>
                <a href="#method-i-erase_buff">erase_buff</a>,
              </li>
            
              
              <li>
                <a href="#method-i-escape">escape</a>,
              </li>
            
              
              <li>
                <a href="#method-i-execute_damage">execute_damage</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-force_action">force_action</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-init_tp">init_tp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_apply">item_apply</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_cnt">item_cnt</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_cri">item_cri</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_add_buff">item_effect_add_buff</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_add_debuff">item_effect_add_debuff</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_add_state">item_effect_add_state</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_add_state_attack">item_effect_add_state_attack</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_add_state_normal">item_effect_add_state_normal</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_apply">item_effect_apply</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_common_event">item_effect_common_event</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_gain_tp">item_effect_gain_tp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_grow">item_effect_grow</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_learn_skill">item_effect_learn_skill</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_recover_hp">item_effect_recover_hp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_recover_mp">item_effect_recover_mp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_remove_buff">item_effect_remove_buff</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_remove_debuff">item_effect_remove_debuff</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_remove_state">item_effect_remove_state</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_special">item_effect_special</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_effect_test">item_effect_test</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_element_rate">item_element_rate</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_eva">item_eva</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_global_effect_apply">item_global_effect_apply</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_has_any_valid_effects-3F">item_has_any_valid_effects?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_hit">item_hit</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_mrf">item_mrf</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_test">item_test</a>,
              </li>
            
              
              <li>
                <a href="#method-i-item_user_effect">item_user_effect</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>L</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-luk_effect_rate">luk_effect_rate</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-make_action_times">make_action_times</a>,
              </li>
            
              
              <li>
                <a href="#method-i-make_actions">make_actions</a>,
              </li>
            
              
              <li>
                <a href="#method-i-make_damage_value">make_damage_value</a>,
              </li>
            
              
              <li>
                <a href="#method-i-make_speed">make_speed</a>,
              </li>
            
              
              <li>
                <a href="#method-i-max_slip_damage">max_slip_damage</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>O</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-on_action_end">on_action_end</a>,
              </li>
            
              
              <li>
                <a href="#method-i-on_battle_end">on_battle_end</a>,
              </li>
            
              
              <li>
                <a href="#method-i-on_battle_start">on_battle_start</a>,
              </li>
            
              
              <li>
                <a href="#method-i-on_damage">on_damage</a>,
              </li>
            
              
              <li>
                <a href="#method-i-on_restrict">on_restrict</a>,
              </li>
            
              
              <li>
                <a href="#method-i-on_turn_end">on_turn_end</a>,
              </li>
            
              
              <li>
                <a href="#method-i-opposite-3F">opposite?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-overwrite_buff_turns">overwrite_buff_turns</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-perform_map_damage_effect">perform_map_damage_effect</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-regenerate_all">regenerate_all</a>,
              </li>
            
              
              <li>
                <a href="#method-i-regenerate_hp">regenerate_hp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-regenerate_mp">regenerate_mp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-regenerate_tp">regenerate_tp</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_all_buffs">remove_all_buffs</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_battle_states">remove_battle_states</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_buff">remove_buff</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_buffs_auto">remove_buffs_auto</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_current_action">remove_current_action</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_state">remove_state</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_states_auto">remove_states_auto</a>,
              </li>
            
              
              <li>
                <a href="#method-i-remove_states_by_damage">remove_states_by_damage</a>,
              </li>
            
              
              <li>
                <a href="#method-i-reset_state_counts">reset_state_counts</a>,
              </li>
            
              
              <li>
                <a href="#method-i-revive">revive</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-state_addable-3F">state_addable?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-state_removed-3F">state_removed?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-state_restrict-3F">state_restrict?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-update_buff_turns">update_buff_turns</a>,
              </li>
            
              
              <li>
                <a href="#method-i-update_state_turns">update_state_turns</a>,
              </li>
            
              
              <li>
                <a href="#method-i-use_item">use_item</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    
      <!-- Section constants -->
      <div class="sectiontitle">Constants</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class="attr-name">EFFECT_RECOVER_HP</td>
            <td>=</td>
            <td class="attr-value">11</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>常量（使用效果）</p></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EFFECT_RECOVER_MP</td>
            <td>=</td>
            <td class="attr-value">12</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EFFECT_GAIN_TP</td>
            <td>=</td>
            <td class="attr-value">13</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EFFECT_ADD_STATE</td>
            <td>=</td>
            <td class="attr-value">21</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EFFECT_REMOVE_STATE</td>
            <td>=</td>
            <td class="attr-value">22</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EFFECT_ADD_BUFF</td>
            <td>=</td>
            <td class="attr-value">31</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EFFECT_ADD_DEBUFF</td>
            <td>=</td>
            <td class="attr-value">32</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EFFECT_REMOVE_BUFF</td>
            <td>=</td>
            <td class="attr-value">33</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EFFECT_REMOVE_DEBUFF</td>
            <td>=</td>
            <td class="attr-value">34</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EFFECT_SPECIAL</td>
            <td>=</td>
            <td class="attr-value">41</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EFFECT_GROW</td>
            <td>=</td>
            <td class="attr-value">42</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EFFECT_LEARN_SKILL</td>
            <td>=</td>
            <td class="attr-value">43</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">EFFECT_COMMON_EVENT</td>
            <td>=</td>
            <td class="attr-value">44</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"></td>
            </tr>
          
        
          <tr valign='top'>
            <td class="attr-name">SPECIAL_EFFECT_ESCAPE</td>
            <td>=</td>
            <td class="attr-value">0</td>
          </tr>
          
            <tr valign='top'>
              <td>&nbsp;</td>
              <td colspan="2" class="attr-desc"><p>常量（特殊效果）</p></td>
            </tr>
          
        
      </table>
    


    
      <!-- Section attributes -->
      <div class="sectiontitle">Attributes</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>action_times</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>actions</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>animation_id</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>animation_mirror</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>battler_hue</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>battler_name</td>
            <td class='attr-desc'><p>定义实例变量</p></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>last_target_index</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>result</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>speed</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>sprite_effect_type</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <b>new</b>()
            
            <a href="../classes/Game_Battler.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>初始化对象</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 31</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">initialize</span>
  <span class="ruby-ivar">@battler_name</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-ivar">@battler_hue</span> = <span class="ruby-number">0</span>
  <span class="ruby-ivar">@actions</span> = []
  <span class="ruby-ivar">@speed</span> = <span class="ruby-number">0</span>
  <span class="ruby-ivar">@result</span> = <span class="ruby-constant">Game_ActionResult</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>)
  <span class="ruby-ivar">@last_target_index</span> = <span class="ruby-number">0</span>
  <span class="ruby-ivar">@guarding</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">clear_sprite_effects</span>
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-add_buff">
            
              <b>add_buff</b>(param_id, turns)
            
            <a href="../classes/Game_Battler.html#method-i-add_buff" name="method-i-add_buff" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>强化能力</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-add_buff_source')" id="l_method-i-add_buff_source">show</a>
                
              </p>
              <div id="method-i-add_buff_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 127</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">add_buff</span>(<span class="ruby-identifier">param_id</span>, <span class="ruby-identifier">turns</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">alive?</span>
  <span class="ruby-ivar">@buffs</span>[<span class="ruby-identifier">param_id</span>] <span class="ruby-operator">+=</span> <span class="ruby-number">1</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">buff_max?</span>(<span class="ruby-identifier">param_id</span>)
  <span class="ruby-identifier">erase_buff</span>(<span class="ruby-identifier">param_id</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">debuff?</span>(<span class="ruby-identifier">param_id</span>)
  <span class="ruby-identifier">overwrite_buff_turns</span>(<span class="ruby-identifier">param_id</span>, <span class="ruby-identifier">turns</span>)
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">added_buffs</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">param_id</span>).<span class="ruby-identifier">uniq!</span>
  <span class="ruby-identifier">refresh</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-add_debuff">
            
              <b>add_debuff</b>(param_id, turns)
            
            <a href="../classes/Game_Battler.html#method-i-add_debuff" name="method-i-add_debuff" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>弱化能力</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-add_debuff_source')" id="l_method-i-add_debuff_source">show</a>
                
              </p>
              <div id="method-i-add_debuff_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 136</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">add_debuff</span>(<span class="ruby-identifier">param_id</span>, <span class="ruby-identifier">turns</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">alive?</span>
  <span class="ruby-ivar">@buffs</span>[<span class="ruby-identifier">param_id</span>] <span class="ruby-operator">-=</span> <span class="ruby-number">1</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">debuff_max?</span>(<span class="ruby-identifier">param_id</span>)
  <span class="ruby-identifier">erase_buff</span>(<span class="ruby-identifier">param_id</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">buff?</span>(<span class="ruby-identifier">param_id</span>)
  <span class="ruby-identifier">overwrite_buff_turns</span>(<span class="ruby-identifier">param_id</span>, <span class="ruby-identifier">turns</span>)
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">added_debuffs</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">param_id</span>).<span class="ruby-identifier">uniq!</span>
  <span class="ruby-identifier">refresh</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-add_new_state">
            
              <b>add_new_state</b>(state_id)
            
            <a href="../classes/Game_Battler.html#method-i-add_new_state" name="method-i-add_new_state" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>附加新的状态</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-add_new_state_source')" id="l_method-i-add_new_state_source">show</a>
                
              </p>
              <div id="method-i-add_new_state_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 79</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">add_new_state</span>(<span class="ruby-identifier">state_id</span>)
  <span class="ruby-identifier">die</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">state_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">death_state_id</span>
  <span class="ruby-ivar">@states</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">state_id</span>)
  <span class="ruby-identifier">on_restrict</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">restriction</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
  <span class="ruby-identifier">sort_states</span>
  <span class="ruby-identifier">refresh</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-add_state">
            
              <b>add_state</b>(state_id)
            
            <a href="../classes/Game_Battler.html#method-i-add_state" name="method-i-add_state" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>附加状态</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-add_state_source')" id="l_method-i-add_state_source">show</a>
                
              </p>
              <div id="method-i-add_state_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 58</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">add_state</span>(<span class="ruby-identifier">state_id</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">state_addable?</span>(<span class="ruby-identifier">state_id</span>)
    <span class="ruby-identifier">add_new_state</span>(<span class="ruby-identifier">state_id</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">state?</span>(<span class="ruby-identifier">state_id</span>)
    <span class="ruby-identifier">reset_state_counts</span>(<span class="ruby-identifier">state_id</span>)
    <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">added_states</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">state_id</span>).<span class="ruby-identifier">uniq!</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-apply_critical">
            
              <b>apply_critical</b>(damage)
            
            <a href="../classes/Game_Battler.html#method-i-apply_critical" name="method-i-apply_critical" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用关键一击</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-apply_critical_source')" id="l_method-i-apply_critical_source">show</a>
                
              </p>
              <div id="method-i-apply_critical_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 287</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">apply_critical</span>(<span class="ruby-identifier">damage</span>)
  <span class="ruby-identifier">damage</span> * <span class="ruby-number">3</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-apply_guard">
            
              <b>apply_guard</b>(damage)
            
            <a href="../classes/Game_Battler.html#method-i-apply_guard" name="method-i-apply_guard" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用防御修正</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-apply_guard_source')" id="l_method-i-apply_guard_source">show</a>
                
              </p>
              <div id="method-i-apply_guard_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 297</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">apply_guard</span>(<span class="ruby-identifier">damage</span>)
  <span class="ruby-identifier">damage</span> <span class="ruby-operator">/</span> (<span class="ruby-identifier">damage</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">guard?</span> <span class="ruby-operator">?</span> <span class="ruby-number">2</span> * <span class="ruby-identifier">grd</span> <span class="ruby-operator">:</span> <span class="ruby-number">1</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-apply_variance">
            
              <b>apply_variance</b>(damage, variance)
            
            <a href="../classes/Game_Battler.html#method-i-apply_variance" name="method-i-apply_variance" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用离散度</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-apply_variance_source')" id="l_method-i-apply_variance_source">show</a>
                
              </p>
              <div id="method-i-apply_variance_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 291</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">apply_variance</span>(<span class="ruby-identifier">damage</span>, <span class="ruby-identifier">variance</span>)
  <span class="ruby-identifier">amp</span> = [<span class="ruby-identifier">damage</span>.<span class="ruby-identifier">abs</span> * <span class="ruby-identifier">variance</span> <span class="ruby-operator">/</span> <span class="ruby-number">100</span>, <span class="ruby-number">0</span>].<span class="ruby-identifier">max</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-identifier">var</span> = <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">amp</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">amp</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>) <span class="ruby-operator">-</span> <span class="ruby-identifier">amp</span>
  <span class="ruby-identifier">damage</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-number">0</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">damage</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">var</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">damage</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">var</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-attack_apply">
            
              <b>attack_apply</b>(attacker)
            
            <a href="../classes/Game_Battler.html#method-i-attack_apply" name="method-i-attack_apply" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用普通攻击的效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-attack_apply_source')" id="l_method-i-attack_apply_source">show</a>
                
              </p>
              <div id="method-i-attack_apply_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 371</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">attack_apply</span>(<span class="ruby-identifier">attacker</span>)
  <span class="ruby-identifier">item_apply</span>(<span class="ruby-identifier">attacker</span>, <span class="ruby-identifier">$data_skills</span>[<span class="ruby-identifier">attacker</span>.<span class="ruby-identifier">attack_skill_id</span>])
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-buff-3F">
            
              <b>buff?</b>(param_id)
            
            <a href="../classes/Game_Battler.html#method-i-buff-3F" name="method-i-buff-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>判定能力强化状态</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-buff-3F_source')" id="l_method-i-buff-3F_source">show</a>
                
              </p>
              <div id="method-i-buff-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 159</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">buff?</span>(<span class="ruby-identifier">param_id</span>)
  <span class="ruby-ivar">@buffs</span>[<span class="ruby-identifier">param_id</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-buff_max-3F">
            
              <b>buff_max?</b>(param_id)
            
            <a href="../classes/Game_Battler.html#method-i-buff_max-3F" name="method-i-buff_max-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>判定能力强化是否为最大程度</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-buff_max-3F_source')" id="l_method-i-buff_max-3F_source">show</a>
                
              </p>
              <div id="method-i-buff_max-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 167</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">buff_max?</span>(<span class="ruby-identifier">param_id</span>)
  <span class="ruby-ivar">@buffs</span>[<span class="ruby-identifier">param_id</span>] <span class="ruby-operator">==</span> <span class="ruby-number">2</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-charge_tp_by_damage">
            
              <b>charge_tp_by_damage</b>(damage_rate)
            
            <a href="../classes/Game_Battler.html#method-i-charge_tp_by_damage" name="method-i-charge_tp_by_damage" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>受到伤害时增加的 TP</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-charge_tp_by_damage_source')" id="l_method-i-charge_tp_by_damage_source">show</a>
                
              </p>
              <div id="method-i-charge_tp_by_damage_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 567</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">charge_tp_by_damage</span>(<span class="ruby-identifier">damage_rate</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">tp</span> <span class="ruby-operator">+=</span> <span class="ruby-number">50</span> * <span class="ruby-identifier">damage_rate</span> * <span class="ruby-identifier">tcr</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-clear_actions">
            
              <b>clear_actions</b>()
            
            <a href="../classes/Game_Battler.html#method-i-clear_actions" name="method-i-clear_actions" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>清除战斗行动</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-clear_actions_source')" id="l_method-i-clear_actions_source">show</a>
                
              </p>
              <div id="method-i-clear_actions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 49</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">clear_actions</span>
  <span class="ruby-ivar">@actions</span>.<span class="ruby-identifier">clear</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-clear_sprite_effects">
            
              <b>clear_sprite_effects</b>()
            
            <a href="../classes/Game_Battler.html#method-i-clear_sprite_effects" name="method-i-clear_sprite_effects" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>清除精灵的效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-clear_sprite_effects_source')" id="l_method-i-clear_sprite_effects_source">show</a>
                
              </p>
              <div id="method-i-clear_sprite_effects_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 43</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">clear_sprite_effects</span>
  <span class="ruby-ivar">@animation_id</span> = <span class="ruby-number">0</span>
  <span class="ruby-ivar">@animation_mirror</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@sprite_effect_type</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-clear_states">
            
              <b>clear_states</b>()
            
            <a href="../classes/Game_Battler.html#method-i-clear_states" name="method-i-clear_states" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>清除状态信息</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-clear_states_source')" id="l_method-i-clear_states_source">show</a>
                
              </p>
              <div id="method-i-clear_states_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 53</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">clear_states</span>
  <span class="ruby-keyword">super</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">clear_status_effects</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-clear_tp">
            
              <b>clear_tp</b>()
            
            <a href="../classes/Game_Battler.html#method-i-clear_tp" name="method-i-clear_tp" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>清除 TP</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-clear_tp_source')" id="l_method-i-clear_tp_source">show</a>
                
              </p>
              <div id="method-i-clear_tp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 563</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">clear_tp</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">tp</span> = <span class="ruby-number">0</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-consume_item">
            
              <b>consume_item</b>(item)
            
            <a href="../classes/Game_Battler.html#method-i-consume_item" name="method-i-consume_item" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>消耗物品</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-consume_item_source')" id="l_method-i-consume_item_source">show</a>
                
              </p>
              <div id="method-i-consume_item_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 319</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">consume_item</span>(<span class="ruby-identifier">item</span>)
  <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">consume_item</span>(<span class="ruby-identifier">item</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-current_action">
            
              <b>current_action</b>()
            
            <a href="../classes/Game_Battler.html#method-i-current_action" name="method-i-current_action" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>获取当前战斗行动</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-current_action_source')" id="l_method-i-current_action_source">show</a>
                
              </p>
              <div id="method-i-current_action_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 240</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">current_action</span>
  <span class="ruby-ivar">@actions</span>[<span class="ruby-number">0</span>]
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-debuff-3F">
            
              <b>debuff?</b>(param_id)
            
            <a href="../classes/Game_Battler.html#method-i-debuff-3F" name="method-i-debuff-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>判定能力弱化状态</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-debuff-3F_source')" id="l_method-i-debuff-3F_source">show</a>
                
              </p>
              <div id="method-i-debuff-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 163</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">debuff?</span>(<span class="ruby-identifier">param_id</span>)
  <span class="ruby-ivar">@buffs</span>[<span class="ruby-identifier">param_id</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-number">0</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-debuff_max-3F">
            
              <b>debuff_max?</b>(param_id)
            
            <a href="../classes/Game_Battler.html#method-i-debuff_max-3F" name="method-i-debuff_max-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>判定能力弱化是否为最大程度</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-debuff_max-3F_source')" id="l_method-i-debuff_max-3F_source">show</a>
                
              </p>
              <div id="method-i-debuff_max-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 171</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">debuff_max?</span>(<span class="ruby-identifier">param_id</span>)
  <span class="ruby-ivar">@buffs</span>[<span class="ruby-identifier">param_id</span>] <span class="ruby-operator">==</span> <span class="ruby-number">-2</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-die">
            
              <b>die</b>()
            
            <a href="../classes/Game_Battler.html#method-i-die" name="method-i-die" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>死亡</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-die_source')" id="l_method-i-die_source">show</a>
                
              </p>
              <div id="method-i-die_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 110</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">die</span>
  <span class="ruby-ivar">@hp</span> = <span class="ruby-number">0</span>
  <span class="ruby-identifier">clear_states</span>
  <span class="ruby-identifier">clear_buffs</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-elements_max_rate">
            
              <b>elements_max_rate</b>(elements)
            
            <a href="../classes/Game_Battler.html#method-i-elements_max_rate" name="method-i-elements_max_rate" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>获取属性的最大修正值，返回所有属性中最有效的一个
elements : 属性 ID 数组</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-elements_max_rate_source')" id="l_method-i-elements_max_rate_source">show</a>
                
              </p>
              <div id="method-i-elements_max_rate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 283</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">elements_max_rate</span>(<span class="ruby-identifier">elements</span>)
  <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">inject</span>([<span class="ruby-number">0.0</span>]) {<span class="ruby-operator">|</span><span class="ruby-identifier">r</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">element_rate</span>(<span class="ruby-identifier">i</span>)) }.<span class="ruby-identifier">max</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-erase_buff">
            
              <b>erase_buff</b>(param_id)
            
            <a href="../classes/Game_Battler.html#method-i-erase_buff" name="method-i-erase_buff" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>消除能力强化／弱化</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-erase_buff_source')" id="l_method-i-erase_buff_source">show</a>
                
              </p>
              <div id="method-i-erase_buff_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 154</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">erase_buff</span>(<span class="ruby-identifier">param_id</span>)
  <span class="ruby-ivar">@buffs</span>[<span class="ruby-identifier">param_id</span>] = <span class="ruby-number">0</span>
  <span class="ruby-ivar">@buff_turns</span>[<span class="ruby-identifier">param_id</span>] = <span class="ruby-number">0</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-escape">
            
              <b>escape</b>()
            
            <a href="../classes/Game_Battler.html#method-i-escape" name="method-i-escape" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>撤退</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-escape_source')" id="l_method-i-escape_source">show</a>
                
              </p>
              <div id="method-i-escape_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 120</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">escape</span>
  <span class="ruby-identifier">hide</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">in_battle</span>
  <span class="ruby-identifier">clear_actions</span>
  <span class="ruby-identifier">clear_states</span>
  <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_escape</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-execute_damage">
            
              <b>execute_damage</b>(user)
            
            <a href="../classes/Game_Battler.html#method-i-execute_damage" name="method-i-execute_damage" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>处理伤害 调用前需要设置好 @result.hp_damage   @result.mp_damage
@result.hp_drain    @result.mp_drain</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-execute_damage_source')" id="l_method-i-execute_damage_source">show</a>
                
              </p>
              <div id="method-i-execute_damage_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 304</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">execute_damage</span>(<span class="ruby-identifier">user</span>)
  <span class="ruby-identifier">on_damage</span>(<span class="ruby-ivar">@result</span>.<span class="ruby-identifier">hp_damage</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">hp_damage</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">-=</span> <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">hp_damage</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">-=</span> <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">mp_damage</span>
  <span class="ruby-identifier">user</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">hp_drain</span>
  <span class="ruby-identifier">user</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">mp_drain</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-force_action">
            
              <b>force_action</b>(skill_id, target_index)
            
            <a href="../classes/Game_Battler.html#method-i-force_action" name="method-i-force_action" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>强制战斗行动</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-force_action_source')" id="l_method-i-force_action_source">show</a>
                
              </p>
              <div id="method-i-force_action_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 248</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">force_action</span>(<span class="ruby-identifier">skill_id</span>, <span class="ruby-identifier">target_index</span>)
  <span class="ruby-identifier">clear_actions</span>
  <span class="ruby-identifier">action</span> = <span class="ruby-constant">Game_Action</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">action</span>.<span class="ruby-identifier">set_skill</span>(<span class="ruby-identifier">skill_id</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">target_index</span> <span class="ruby-operator">==</span> <span class="ruby-number">-2</span>
    <span class="ruby-identifier">action</span>.<span class="ruby-identifier">target_index</span> = <span class="ruby-identifier">last_target_index</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">target_index</span> <span class="ruby-operator">==</span> <span class="ruby-number">-1</span>
    <span class="ruby-identifier">action</span>.<span class="ruby-identifier">decide_random_target</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">action</span>.<span class="ruby-identifier">target_index</span> = <span class="ruby-identifier">target_index</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@actions</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">action</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-init_tp">
            
              <b>init_tp</b>()
            
            <a href="../classes/Game_Battler.html#method-i-init_tp" name="method-i-init_tp" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>初始化目标 TP</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-init_tp_source')" id="l_method-i-init_tp_source">show</a>
                
              </p>
              <div id="method-i-init_tp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 559</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">init_tp</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">tp</span> = <span class="ruby-identifier">rand</span> * <span class="ruby-number">25</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_apply">
            
              <b>item_apply</b>(user, item)
            
            <a href="../classes/Game_Battler.html#method-i-item_apply" name="method-i-item_apply" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用技能／物品的效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_apply_source')" id="l_method-i-item_apply_source">show</a>
                
              </p>
              <div id="method-i-item_apply_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 375</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_apply</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">used</span> = <span class="ruby-identifier">item_test</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">missed</span> = (<span class="ruby-ivar">@result</span>.<span class="ruby-identifier">used</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rand</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">item_hit</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>))
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">evaded</span> = (<span class="ruby-operator">!</span><span class="ruby-ivar">@result</span>.<span class="ruby-identifier">missed</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rand</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">item_eva</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>))
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">hit?</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">damage</span>.<span class="ruby-identifier">none?</span>
      <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">critical</span> = (<span class="ruby-identifier">rand</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">item_cri</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>))
      <span class="ruby-identifier">make_damage_value</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
      <span class="ruby-identifier">execute_damage</span>(<span class="ruby-identifier">user</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">item</span>.<span class="ruby-identifier">effects</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">effect</span><span class="ruby-operator">|</span> <span class="ruby-identifier">item_effect_apply</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>) }
    <span class="ruby-identifier">item_user_effect</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_cnt">
            
              <b>item_cnt</b>(user, item)
            
            <a href="../classes/Game_Battler.html#method-i-item_cnt" name="method-i-item_cnt" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>计算技能／物品的反击几率</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_cnt_source')" id="l_method-i-item_cnt_source">show</a>
                
              </p>
              <div id="method-i-item_cnt_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 344</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_cnt</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-number">0</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">physical?</span>          <span class="ruby-comment"># 攻击类型不是物理攻击</span>
  <span class="ruby-keyword">return</span> <span class="ruby-number">0</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">opposite?</span>(<span class="ruby-identifier">user</span>)         <span class="ruby-comment"># 队友无法反击</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">cnt</span>                              <span class="ruby-comment"># 返回反击几率</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_cri">
            
              <b>item_cri</b>(user, item)
            
            <a href="../classes/Game_Battler.html#method-i-item_cri" name="method-i-item_cri" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>计算技能／物品的必杀几率</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_cri_source')" id="l_method-i-item_cri_source">show</a>
                
              </p>
              <div id="method-i-item_cri_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 367</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_cri</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-identifier">item</span>.<span class="ruby-identifier">damage</span>.<span class="ruby-identifier">critical</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">cri</span> * (<span class="ruby-number">1</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">cev</span>) <span class="ruby-operator">:</span> <span class="ruby-number">0</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_add_buff">
            
              <b>item_effect_add_buff</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_add_buff" name="method-i-item_effect_add_buff" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“强化能力”效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_add_buff_source')" id="l_method-i-item_effect_add_buff_source">show</a>
                
              </p>
              <div id="method-i-item_effect_add_buff_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 500</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_add_buff</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-identifier">add_buff</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>, <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value1</span>)
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_add_debuff">
            
              <b>item_effect_add_debuff</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_add_debuff" name="method-i-item_effect_add_debuff" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“弱化能力”效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_add_debuff_source')" id="l_method-i-item_effect_add_debuff_source">show</a>
                
              </p>
              <div id="method-i-item_effect_add_debuff_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 505</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_add_debuff</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-identifier">chance</span> = <span class="ruby-identifier">debuff_rate</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>) * <span class="ruby-identifier">luk_effect_rate</span>(<span class="ruby-identifier">user</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">rand</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">chance</span>
    <span class="ruby-identifier">add_debuff</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>, <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value1</span>)
    <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_add_state">
            
              <b>item_effect_add_state</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_add_state" name="method-i-item_effect_add_state" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“附加状态”效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_add_state_source')" id="l_method-i-item_effect_add_state_source">show</a>
                
              </p>
              <div id="method-i-item_effect_add_state_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 461</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_add_state</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
    <span class="ruby-identifier">item_effect_add_state_attack</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">item_effect_add_state_normal</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_add_state_attack">
            
              <b>item_effect_add_state_attack</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_add_state_attack" name="method-i-item_effect_add_state_attack" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“状态附加”效果：普通攻击</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_add_state_attack_source')" id="l_method-i-item_effect_add_state_attack_source">show</a>
                
              </p>
              <div id="method-i-item_effect_add_state_attack_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 469</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_add_state_attack</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-identifier">user</span>.<span class="ruby-identifier">atk_states</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">state_id</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">chance</span> = <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value1</span>
    <span class="ruby-identifier">chance</span> <span class="ruby-operator">*=</span> <span class="ruby-identifier">state_rate</span>(<span class="ruby-identifier">state_id</span>)
    <span class="ruby-identifier">chance</span> <span class="ruby-operator">*=</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">atk_states_rate</span>(<span class="ruby-identifier">state_id</span>)
    <span class="ruby-identifier">chance</span> <span class="ruby-operator">*=</span> <span class="ruby-identifier">luk_effect_rate</span>(<span class="ruby-identifier">user</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">rand</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">chance</span>
      <span class="ruby-identifier">add_state</span>(<span class="ruby-identifier">state_id</span>)
      <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_add_state_normal">
            
              <b>item_effect_add_state_normal</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_add_state_normal" name="method-i-item_effect_add_state_normal" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“状态附加”效果：普通</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_add_state_normal_source')" id="l_method-i-item_effect_add_state_normal_source">show</a>
                
              </p>
              <div id="method-i-item_effect_add_state_normal_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 482</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_add_state_normal</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-identifier">chance</span> = <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value1</span>
  <span class="ruby-identifier">chance</span> <span class="ruby-operator">*=</span> <span class="ruby-identifier">state_rate</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">opposite?</span>(<span class="ruby-identifier">user</span>)
  <span class="ruby-identifier">chance</span> <span class="ruby-operator">*=</span> <span class="ruby-identifier">luk_effect_rate</span>(<span class="ruby-identifier">user</span>)      <span class="ruby-keyword">if</span> <span class="ruby-identifier">opposite?</span>(<span class="ruby-identifier">user</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">rand</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">chance</span>
    <span class="ruby-identifier">add_state</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>)
    <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_apply">
            
              <b>item_effect_apply</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_apply" name="method-i-item_effect_apply" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用使用效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_apply_source')" id="l_method-i-item_effect_apply_source">show</a>
                
              </p>
              <div id="method-i-item_effect_apply_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 416</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_apply</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-identifier">method_table</span> = {
    <span class="ruby-constant">EFFECT_RECOVER_HP</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:item_effect_recover_hp</span>,
    <span class="ruby-constant">EFFECT_RECOVER_MP</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:item_effect_recover_mp</span>,
    <span class="ruby-constant">EFFECT_GAIN_TP</span>       =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:item_effect_gain_tp</span>,
    <span class="ruby-constant">EFFECT_ADD_STATE</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:item_effect_add_state</span>,
    <span class="ruby-constant">EFFECT_REMOVE_STATE</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:item_effect_remove_state</span>,
    <span class="ruby-constant">EFFECT_ADD_BUFF</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:item_effect_add_buff</span>,
    <span class="ruby-constant">EFFECT_ADD_DEBUFF</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:item_effect_add_debuff</span>,
    <span class="ruby-constant">EFFECT_REMOVE_BUFF</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:item_effect_remove_buff</span>,
    <span class="ruby-constant">EFFECT_REMOVE_DEBUFF</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:item_effect_remove_debuff</span>,
    <span class="ruby-constant">EFFECT_SPECIAL</span>       =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:item_effect_special</span>,
    <span class="ruby-constant">EFFECT_GROW</span>          =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:item_effect_grow</span>,
    <span class="ruby-constant">EFFECT_LEARN_SKILL</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:item_effect_learn_skill</span>,
    <span class="ruby-constant">EFFECT_COMMON_EVENT</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:item_effect_common_event</span>,
  }
  <span class="ruby-identifier">method_name</span> = <span class="ruby-identifier">method_table</span>[<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">code</span>]
  <span class="ruby-identifier">send</span>(<span class="ruby-identifier">method_name</span>, <span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">method_name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_common_event">
            
              <b>item_effect_common_event</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_common_event" name="method-i-item_effect_common_event" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“公共事件”效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_common_event_source')" id="l_method-i-item_effect_common_event_source">show</a>
                
              </p>
              <div id="method-i-item_effect_common_event_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 541</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_common_event</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_gain_tp">
            
              <b>item_effect_gain_tp</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_gain_tp" name="method-i-item_effect_gain_tp" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“增加 TP”效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_gain_tp_source')" id="l_method-i-item_effect_gain_tp_source">show</a>
                
              </p>
              <div id="method-i-item_effect_gain_tp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 454</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_gain_tp</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value1</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">tp_damage</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">value</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-number">0</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">tp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_grow">
            
              <b>item_effect_grow</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_grow" name="method-i-item_effect_grow" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“能力提升”效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_grow_source')" id="l_method-i-item_effect_grow_source">show</a>
                
              </p>
              <div id="method-i-item_effect_grow_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 531</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_grow</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-identifier">add_param</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>, <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value1</span>.<span class="ruby-identifier">to_i</span>)
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_learn_skill">
            
              <b>item_effect_learn_skill</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_learn_skill" name="method-i-item_effect_learn_skill" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“学会技能”效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_learn_skill_source')" id="l_method-i-item_effect_learn_skill_source">show</a>
                
              </p>
              <div id="method-i-item_effect_learn_skill_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 536</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_learn_skill</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-identifier">learn_skill</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor?</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_recover_hp">
            
              <b>item_effect_recover_hp</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_recover_hp" name="method-i-item_effect_recover_hp" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“恢复 HP”效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_recover_hp_source')" id="l_method-i-item_effect_recover_hp_source">show</a>
                
              </p>
              <div id="method-i-item_effect_recover_hp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 436</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_recover_hp</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-identifier">value</span> = (<span class="ruby-identifier">mhp</span> * <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value1</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value2</span>) * <span class="ruby-identifier">rec</span>
  <span class="ruby-identifier">value</span> <span class="ruby-operator">*=</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">pha</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">Item</span>)
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">hp_damage</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">value</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_recover_mp">
            
              <b>item_effect_recover_mp</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_recover_mp" name="method-i-item_effect_recover_mp" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“恢复 MP”效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_recover_mp_source')" id="l_method-i-item_effect_recover_mp_source">show</a>
                
              </p>
              <div id="method-i-item_effect_recover_mp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 445</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_recover_mp</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-identifier">value</span> = (<span class="ruby-identifier">mmp</span> * <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value1</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value2</span>) * <span class="ruby-identifier">rec</span>
  <span class="ruby-identifier">value</span> <span class="ruby-operator">*=</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">pha</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">Item</span>)
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">mp_damage</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">value</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-number">0</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_remove_buff">
            
              <b>item_effect_remove_buff</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_remove_buff" name="method-i-item_effect_remove_buff" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“解除能力强化”效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_remove_buff_source')" id="l_method-i-item_effect_remove_buff_source">show</a>
                
              </p>
              <div id="method-i-item_effect_remove_buff_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 513</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_remove_buff</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-identifier">remove_buff</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffs</span>[<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_remove_debuff">
            
              <b>item_effect_remove_debuff</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_remove_debuff" name="method-i-item_effect_remove_debuff" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“解除能力弱化”效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_remove_debuff_source')" id="l_method-i-item_effect_remove_debuff_source">show</a>
                
              </p>
              <div id="method-i-item_effect_remove_debuff_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 518</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_remove_debuff</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-identifier">remove_buff</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffs</span>[<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-number">0</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_remove_state">
            
              <b>item_effect_remove_state</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_remove_state" name="method-i-item_effect_remove_state" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“状态解除”效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_remove_state_source')" id="l_method-i-item_effect_remove_state_source">show</a>
                
              </p>
              <div id="method-i-item_effect_remove_state_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 492</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_remove_state</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-identifier">chance</span> = <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value1</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">rand</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">chance</span>
    <span class="ruby-identifier">remove_state</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>)
    <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_special">
            
              <b>item_effect_special</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_special" name="method-i-item_effect_special" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用“特殊效果”效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_special_source')" id="l_method-i-item_effect_special_source">show</a>
                
              </p>
              <div id="method-i-item_effect_special_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 523</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_special</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">SPECIAL_EFFECT_ESCAPE</span>
    <span class="ruby-identifier">escape</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_effect_test">
            
              <b>item_effect_test</b>(user, item, effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_effect_test" name="method-i-item_effect_test" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>测试使用效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_effect_test_source')" id="l_method-i-item_effect_test_source">show</a>
                
              </p>
              <div id="method-i-item_effect_test_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 391</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_effect_test</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">code</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">EFFECT_RECOVER_HP</span>
    <span class="ruby-identifier">hp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">mhp</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value1</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value2</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">0</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">EFFECT_RECOVER_MP</span>
    <span class="ruby-identifier">mp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">mmp</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value1</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">value2</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">0</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">EFFECT_ADD_STATE</span>
    <span class="ruby-operator">!</span><span class="ruby-identifier">state?</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-constant">EFFECT_REMOVE_STATE</span>
    <span class="ruby-identifier">state?</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-constant">EFFECT_ADD_BUFF</span>
    <span class="ruby-operator">!</span><span class="ruby-identifier">buff_max?</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-constant">EFFECT_ADD_DEBUFF</span>
    <span class="ruby-operator">!</span><span class="ruby-identifier">debuff_max?</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-constant">EFFECT_REMOVE_BUFF</span>
    <span class="ruby-identifier">buff?</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-constant">EFFECT_REMOVE_DEBUFF</span>
    <span class="ruby-identifier">debuff?</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-constant">EFFECT_LEARN_SKILL</span>
    <span class="ruby-identifier">actor?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">skills</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">$data_skills</span>[<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>])
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_element_rate">
            
              <b>item_element_rate</b>(user, item)
            
            <a href="../classes/Game_Battler.html#method-i-item_element_rate" name="method-i-item_element_rate" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>获取技能／物品的属性修正值</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_element_rate_source')" id="l_method-i-item_element_rate_source">show</a>
                
              </p>
              <div id="method-i-item_element_rate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 274</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_element_rate</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">damage</span>.<span class="ruby-identifier">element_id</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">0</span>
    <span class="ruby-identifier">user</span>.<span class="ruby-identifier">atk_elements</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-number">1.0</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">elements_max_rate</span>(<span class="ruby-identifier">user</span>.<span class="ruby-identifier">atk_elements</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">element_rate</span>(<span class="ruby-identifier">item</span>.<span class="ruby-identifier">damage</span>.<span class="ruby-identifier">element_id</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_eva">
            
              <b>item_eva</b>(user, item)
            
            <a href="../classes/Game_Battler.html#method-i-item_eva" name="method-i-item_eva" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>计算技能／物品的闪避几率</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_eva_source')" id="l_method-i-item_eva_source">show</a>
                
              </p>
              <div id="method-i-item_eva_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 361</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_eva</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">eva</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">physical?</span>            <span class="ruby-comment"># 是物理攻击则返回闪避几率</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">mev</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">magical?</span>             <span class="ruby-comment"># 是魔法攻击则返回闪避魔法几率</span>
  <span class="ruby-keyword">return</span> <span class="ruby-number">0</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_global_effect_apply">
            
              <b>item_global_effect_apply</b>(effect)
            
            <a href="../classes/Game_Battler.html#method-i-item_global_effect_apply" name="method-i-item_global_effect_apply" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>应用对于使用目标以外的效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_global_effect_apply_source')" id="l_method-i-item_global_effect_apply_source">show</a>
                
              </p>
              <div id="method-i-item_global_effect_apply_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 323</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_global_effect_apply</span>(<span class="ruby-identifier">effect</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">effect</span>.<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-constant">EFFECT_COMMON_EVENT</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">reserve_common_event</span>(<span class="ruby-identifier">effect</span>.<span class="ruby-identifier">data_id</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_has_any_valid_effects-3F">
            
              <b>item_has_any_valid_effects?</b>(user, item)
            
            <a href="../classes/Game_Battler.html#method-i-item_has_any_valid_effects-3F" name="method-i-item_has_any_valid_effects-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>判定技能／物品是否有效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_has_any_valid_effects-3F_source')" id="l_method-i-item_has_any_valid_effects-3F_source">show</a>
                
              </p>
              <div id="method-i-item_has_any_valid_effects-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 340</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_has_any_valid_effects?</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-identifier">item</span>.<span class="ruby-identifier">effects</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">effect</span><span class="ruby-operator">|</span> <span class="ruby-identifier">item_effect_test</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>, <span class="ruby-identifier">effect</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_hit">
            
              <b>item_hit</b>(user, item)
            
            <a href="../classes/Game_Battler.html#method-i-item_hit" name="method-i-item_hit" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>计算技能／物品的成功几率</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_hit_source')" id="l_method-i-item_hit_source">show</a>
                
              </p>
              <div id="method-i-item_hit_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 355</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_hit</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-identifier">rate</span> = <span class="ruby-identifier">item</span>.<span class="ruby-identifier">success_rate</span> * <span class="ruby-number">0.01</span>         <span class="ruby-comment"># 获取成功几率</span>
  <span class="ruby-identifier">rate</span> <span class="ruby-operator">*=</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">hit</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">physical?</span>      <span class="ruby-comment"># 物理攻击：计算成功几率的乘积</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">rate</span>                             <span class="ruby-comment"># 返回计算后的成功几率</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_mrf">
            
              <b>item_mrf</b>(user, item)
            
            <a href="../classes/Game_Battler.html#method-i-item_mrf" name="method-i-item_mrf" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>计算技能／物品的反射几率</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_mrf_source')" id="l_method-i-item_mrf_source">show</a>
                
              </p>
              <div id="method-i-item_mrf_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 350</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_mrf</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">mrf</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">magical?</span>             <span class="ruby-comment"># 是魔法攻击则返回反射魔法几率</span>
  <span class="ruby-keyword">return</span> <span class="ruby-number">0</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_test">
            
              <b>item_test</b>(user, item)
            
            <a href="../classes/Game_Battler.html#method-i-item_test" name="method-i-item_test" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>技能／物品的应用测试 如果使用目标的 HP 或者 MP
全满时，禁止使用恢复道具。</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_test_source')" id="l_method-i-item_test_source">show</a>
                
              </p>
              <div id="method-i-item_test_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 330</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_test</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">for_dead_friend?</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">dead?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">in_battle</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">for_opponent?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">damage</span>.<span class="ruby-identifier">recover?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">damage</span>.<span class="ruby-identifier">to_hp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">mhp</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">damage</span>.<span class="ruby-identifier">recover?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">damage</span>.<span class="ruby-identifier">to_mp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">mp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">mmp</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item_has_any_valid_effects?</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-item_user_effect">
            
              <b>item_user_effect</b>(user, item)
            
            <a href="../classes/Game_Battler.html#method-i-item_user_effect" name="method-i-item_user_effect" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>对技能／物品使用者的效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-item_user_effect_source')" id="l_method-i-item_user_effect_source">show</a>
                
              </p>
              <div id="method-i-item_user_effect_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 544</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">item_user_effect</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-identifier">user</span>.<span class="ruby-identifier">tp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">tp_gain</span> * <span class="ruby-identifier">user</span>.<span class="ruby-identifier">tcr</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-luk_effect_rate">
            
              <b>luk_effect_rate</b>(user)
            
            <a href="../classes/Game_Battler.html#method-i-luk_effect_rate" name="method-i-luk_effect_rate" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>获取幸运影响程度</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-luk_effect_rate_source')" id="l_method-i-luk_effect_rate_source">show</a>
                
              </p>
              <div id="method-i-luk_effect_rate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 548</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">luk_effect_rate</span>(<span class="ruby-identifier">user</span>)
  [<span class="ruby-number">1.0</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">user</span>.<span class="ruby-identifier">luk</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">luk</span>) * <span class="ruby-number">0.001</span>, <span class="ruby-number">0.0</span>].<span class="ruby-identifier">max</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-make_action_times">
            
              <b>make_action_times</b>()
            
            <a href="../classes/Game_Battler.html#method-i-make_action_times" name="method-i-make_action_times" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>决定行动回数</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-make_action_times_source')" id="l_method-i-make_action_times_source">show</a>
                
              </p>
              <div id="method-i-make_action_times_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 226</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">make_action_times</span>
  <span class="ruby-identifier">action_plus_set</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-number">1</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">r</span>, <span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">rand</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">r</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">r</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-make_actions">
            
              <b>make_actions</b>()
            
            <a href="../classes/Game_Battler.html#method-i-make_actions" name="method-i-make_actions" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>生成战斗行动</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-make_actions_source')" id="l_method-i-make_actions_source">show</a>
                
              </p>
              <div id="method-i-make_actions_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 230</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">make_actions</span>
  <span class="ruby-identifier">clear_actions</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">movable?</span>
  <span class="ruby-ivar">@actions</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">make_action_times</span>) { <span class="ruby-constant">Game_Action</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-make_damage_value">
            
              <b>make_damage_value</b>(user, item)
            
            <a href="../classes/Game_Battler.html#method-i-make_damage_value" name="method-i-make_damage_value" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>计算伤害</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-make_damage_value_source')" id="l_method-i-make_damage_value_source">show</a>
                
              </p>
              <div id="method-i-make_damage_value_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 262</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">make_damage_value</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">item</span>.<span class="ruby-identifier">damage</span>.<span class="ruby-identifier">eval</span>(<span class="ruby-identifier">user</span>, <span class="ruby-keyword">self</span>, <span class="ruby-identifier">$game_variables</span>)
  <span class="ruby-identifier">value</span> <span class="ruby-operator">*=</span> <span class="ruby-identifier">item_element_rate</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-identifier">value</span> <span class="ruby-operator">*=</span> <span class="ruby-identifier">pdr</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">physical?</span>
  <span class="ruby-identifier">value</span> <span class="ruby-operator">*=</span> <span class="ruby-identifier">mdr</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">magical?</span>
  <span class="ruby-identifier">value</span> <span class="ruby-operator">*=</span> <span class="ruby-identifier">rec</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">damage</span>.<span class="ruby-identifier">recover?</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">apply_critical</span>(<span class="ruby-identifier">value</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">critical</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">apply_variance</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">item</span>.<span class="ruby-identifier">damage</span>.<span class="ruby-identifier">variance</span>)
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">apply_guard</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">make_damage</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">item</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-make_speed">
            
              <b>make_speed</b>()
            
            <a href="../classes/Game_Battler.html#method-i-make_speed" name="method-i-make_speed" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>决定行动速度</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-make_speed_source')" id="l_method-i-make_speed_source">show</a>
                
              </p>
              <div id="method-i-make_speed_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 236</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">make_speed</span>
  <span class="ruby-ivar">@speed</span> = <span class="ruby-ivar">@actions</span>.<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">action</span><span class="ruby-operator">|</span> <span class="ruby-identifier">action</span>.<span class="ruby-identifier">speed</span> }.<span class="ruby-identifier">min</span> <span class="ruby-operator">||</span> <span class="ruby-number">0</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-max_slip_damage">
            
              <b>max_slip_damage</b>()
            
            <a href="../classes/Game_Battler.html#method-i-max_slip_damage" name="method-i-max_slip_damage" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>获取连续伤害最大值</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-max_slip_damage_source')" id="l_method-i-max_slip_damage_source">show</a>
                
              </p>
              <div id="method-i-max_slip_damage_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 578</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">max_slip_damage</span>
  <span class="ruby-identifier">$data_system</span>.<span class="ruby-identifier">opt_slip_death</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">hp</span> <span class="ruby-operator">:</span> [<span class="ruby-identifier">hp</span> <span class="ruby-operator">-</span> <span class="ruby-number">1</span>, <span class="ruby-number">0</span>].<span class="ruby-identifier">max</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-on_action_end">
            
              <b>on_action_end</b>()
            
            <a href="../classes/Game_Battler.html#method-i-on_action_end" name="method-i-on_action_end" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>战斗行动结束时的处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-on_action_end_source')" id="l_method-i-on_action_end_source">show</a>
                
              </p>
              <div id="method-i-on_action_end_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 603</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">on_action_end</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">remove_states_auto</span>(<span class="ruby-number">1</span>)
  <span class="ruby-identifier">remove_buffs_auto</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-on_battle_end">
            
              <b>on_battle_end</b>()
            
            <a href="../classes/Game_Battler.html#method-i-on_battle_end" name="method-i-on_battle_end" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>战斗结束处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-on_battle_end_source')" id="l_method-i-on_battle_end_source">show</a>
                
              </p>
              <div id="method-i-on_battle_end_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 617</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">on_battle_end</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">remove_battle_states</span>
  <span class="ruby-identifier">remove_all_buffs</span>
  <span class="ruby-identifier">clear_actions</span>
  <span class="ruby-identifier">clear_tp</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">preserve_tp?</span>
  <span class="ruby-identifier">appear</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-on_battle_start">
            
              <b>on_battle_start</b>()
            
            <a href="../classes/Game_Battler.html#method-i-on_battle_start" name="method-i-on_battle_start" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>战斗开始处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-on_battle_start_source')" id="l_method-i-on_battle_start_source">show</a>
                
              </p>
              <div id="method-i-on_battle_start_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 599</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">on_battle_start</span>
  <span class="ruby-identifier">init_tp</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">preserve_tp?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-on_damage">
            
              <b>on_damage</b>(value)
            
            <a href="../classes/Game_Battler.html#method-i-on_damage" name="method-i-on_damage" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>被伤害时的处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-on_damage_source')" id="l_method-i-on_damage_source">show</a>
                
              </p>
              <div id="method-i-on_damage_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 626</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">on_damage</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">remove_states_by_damage</span>
  <span class="ruby-identifier">charge_tp_by_damage</span>(<span class="ruby-identifier">value</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">mhp</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-on_restrict">
            
              <b>on_restrict</b>()
            
            <a href="../classes/Game_Battler.html#method-i-on_restrict" name="method-i-on_restrict" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>行动受到限制时的处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-on_restrict_source')" id="l_method-i-on_restrict_source">show</a>
                
              </p>
              <div id="method-i-on_restrict_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 87</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">on_restrict</span>
  <span class="ruby-identifier">clear_actions</span>
  <span class="ruby-identifier">states</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">state</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">remove_state</span>(<span class="ruby-identifier">state</span>.<span class="ruby-identifier">id</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">remove_by_restriction</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-on_turn_end">
            
              <b>on_turn_end</b>()
            
            <a href="../classes/Game_Battler.html#method-i-on_turn_end" name="method-i-on_turn_end" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>回合结束处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-on_turn_end_source')" id="l_method-i-on_turn_end_source">show</a>
                
              </p>
              <div id="method-i-on_turn_end_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 609</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">on_turn_end</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">regenerate_all</span>
  <span class="ruby-identifier">update_state_turns</span>
  <span class="ruby-identifier">update_buff_turns</span>
  <span class="ruby-identifier">remove_states_auto</span>(<span class="ruby-number">2</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-opposite-3F">
            
              <b>opposite?</b>(battler)
            
            <a href="../classes/Game_Battler.html#method-i-opposite-3F" name="method-i-opposite-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>判定是否敌对关系</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-opposite-3F_source')" id="l_method-i-opposite-3F_source">show</a>
                
              </p>
              <div id="method-i-opposite-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 552</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">opposite?</span>(<span class="ruby-identifier">battler</span>)
  <span class="ruby-identifier">actor?</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">actor?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-overwrite_buff_turns">
            
              <b>overwrite_buff_turns</b>(param_id, turns)
            
            <a href="../classes/Game_Battler.html#method-i-overwrite_buff_turns" name="method-i-overwrite_buff_turns" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>重新设置能力强化／弱化的回合数
如果新的回合数比较短，保持原值。</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-overwrite_buff_turns_source')" id="l_method-i-overwrite_buff_turns_source">show</a>
                
              </p>
              <div id="method-i-overwrite_buff_turns_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 176</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">overwrite_buff_turns</span>(<span class="ruby-identifier">param_id</span>, <span class="ruby-identifier">turns</span>)
  <span class="ruby-ivar">@buff_turns</span>[<span class="ruby-identifier">param_id</span>] = <span class="ruby-identifier">turns</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buff_turns</span>[<span class="ruby-identifier">param_id</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">turns</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-perform_map_damage_effect">
            
              <b>perform_map_damage_effect</b>()
            
            <a href="../classes/Game_Battler.html#method-i-perform_map_damage_effect" name="method-i-perform_map_damage_effect" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>在地图上受到伤害时的效果</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-perform_map_damage_effect_source')" id="l_method-i-perform_map_damage_effect_source">show</a>
                
              </p>
              <div id="method-i-perform_map_damage_effect_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 556</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">perform_map_damage_effect</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-regenerate_all">
            
              <b>regenerate_all</b>()
            
            <a href="../classes/Game_Battler.html#method-i-regenerate_all" name="method-i-regenerate_all" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>全部自动恢复</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-regenerate_all_source')" id="l_method-i-regenerate_all_source">show</a>
                
              </p>
              <div id="method-i-regenerate_all_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 591</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">regenerate_all</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">alive?</span>
    <span class="ruby-identifier">regenerate_hp</span>
    <span class="ruby-identifier">regenerate_mp</span>
    <span class="ruby-identifier">regenerate_tp</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-regenerate_hp">
            
              <b>regenerate_hp</b>()
            
            <a href="../classes/Game_Battler.html#method-i-regenerate_hp" name="method-i-regenerate_hp" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>HP 自动恢复</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-regenerate_hp_source')" id="l_method-i-regenerate_hp_source">show</a>
                
              </p>
              <div id="method-i-regenerate_hp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 571</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">regenerate_hp</span>
  <span class="ruby-identifier">damage</span> = <span class="ruby-operator">-</span>(<span class="ruby-identifier">mhp</span> * <span class="ruby-identifier">hrg</span>).<span class="ruby-identifier">to_i</span>
  <span class="ruby-identifier">perform_map_damage_effect</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">in_battle</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">damage</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">hp_damage</span> = [<span class="ruby-identifier">damage</span>, <span class="ruby-identifier">max_slip_damage</span>].<span class="ruby-identifier">min</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">-=</span> <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">hp_damage</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-regenerate_mp">
            
              <b>regenerate_mp</b>()
            
            <a href="../classes/Game_Battler.html#method-i-regenerate_mp" name="method-i-regenerate_mp" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>MP 自动恢复</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-regenerate_mp_source')" id="l_method-i-regenerate_mp_source">show</a>
                
              </p>
              <div id="method-i-regenerate_mp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 582</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">regenerate_mp</span>
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">mp_damage</span> = <span class="ruby-operator">-</span>(<span class="ruby-identifier">mmp</span> * <span class="ruby-identifier">mrg</span>).<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">-=</span> <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">mp_damage</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-regenerate_tp">
            
              <b>regenerate_tp</b>()
            
            <a href="../classes/Game_Battler.html#method-i-regenerate_tp" name="method-i-regenerate_tp" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>TP 自动恢复</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-regenerate_tp_source')" id="l_method-i-regenerate_tp_source">show</a>
                
              </p>
              <div id="method-i-regenerate_tp_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 587</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">regenerate_tp</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">tp</span> <span class="ruby-operator">+=</span> <span class="ruby-number">100</span> * <span class="ruby-identifier">trg</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_all_buffs">
            
              <b>remove_all_buffs</b>()
            
            <a href="../classes/Game_Battler.html#method-i-remove_all_buffs" name="method-i-remove_all_buffs" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>解除所有的强化／弱化状态</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_all_buffs_source')" id="l_method-i-remove_all_buffs_source">show</a>
                
              </p>
              <div id="method-i-remove_all_buffs_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 198</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_all_buffs</span>
  <span class="ruby-ivar">@buffs</span>.<span class="ruby-identifier">size</span>.<span class="ruby-identifier">times</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">param_id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">remove_buff</span>(<span class="ruby-identifier">param_id</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_battle_states">
            
              <b>remove_battle_states</b>()
            
            <a href="../classes/Game_Battler.html#method-i-remove_battle_states" name="method-i-remove_battle_states" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>解除战斗状态</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_battle_states_source')" id="l_method-i-remove_battle_states_source">show</a>
                
              </p>
              <div id="method-i-remove_battle_states_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 192</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_battle_states</span>
  <span class="ruby-identifier">states</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">state</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">remove_state</span>(<span class="ruby-identifier">state</span>.<span class="ruby-identifier">id</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">remove_at_battle_end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_buff">
            
              <b>remove_buff</b>(param_id)
            
            <a href="../classes/Game_Battler.html#method-i-remove_buff" name="method-i-remove_buff" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>解除能力强化／弱化状态</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_buff_source')" id="l_method-i-remove_buff_source">show</a>
                
              </p>
              <div id="method-i-remove_buff_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 145</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_buff</span>(<span class="ruby-identifier">param_id</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">alive?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffs</span>[<span class="ruby-identifier">param_id</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
  <span class="ruby-identifier">erase_buff</span>(<span class="ruby-identifier">param_id</span>)
  <span class="ruby-ivar">@buff_turns</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">param_id</span>)
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">removed_buffs</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">param_id</span>).<span class="ruby-identifier">uniq!</span>
  <span class="ruby-identifier">refresh</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_buffs_auto">
            
              <b>remove_buffs_auto</b>()
            
            <a href="../classes/Game_Battler.html#method-i-remove_buffs_auto" name="method-i-remove_buffs_auto" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>强化／弱化的自动解除</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_buffs_auto_source')" id="l_method-i-remove_buffs_auto_source">show</a>
                
              </p>
              <div id="method-i-remove_buffs_auto_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 211</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_buffs_auto</span>
  <span class="ruby-ivar">@buffs</span>.<span class="ruby-identifier">size</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">param_id</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffs</span>[<span class="ruby-identifier">param_id</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@buff_turns</span>[<span class="ruby-identifier">param_id</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
    <span class="ruby-identifier">remove_buff</span>(<span class="ruby-identifier">param_id</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_current_action">
            
              <b>remove_current_action</b>()
            
            <a href="../classes/Game_Battler.html#method-i-remove_current_action" name="method-i-remove_current_action" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>移除当前战斗行动</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_current_action_source')" id="l_method-i-remove_current_action_source">show</a>
                
              </p>
              <div id="method-i-remove_current_action_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 244</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_current_action</span>
  <span class="ruby-ivar">@actions</span>.<span class="ruby-identifier">shift</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_state">
            
              <b>remove_state</b>(state_id)
            
            <a href="../classes/Game_Battler.html#method-i-remove_state" name="method-i-remove_state" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>解除状态</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_state_source')" id="l_method-i-remove_state_source">show</a>
                
              </p>
              <div id="method-i-remove_state_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 101</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_state</span>(<span class="ruby-identifier">state_id</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">state?</span>(<span class="ruby-identifier">state_id</span>)
    <span class="ruby-identifier">revive</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">state_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">death_state_id</span>
    <span class="ruby-identifier">erase_state</span>(<span class="ruby-identifier">state_id</span>)
    <span class="ruby-identifier">refresh</span>
    <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">removed_states</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">state_id</span>).<span class="ruby-identifier">uniq!</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_states_auto">
            
              <b>remove_states_auto</b>(timing)
            
            <a href="../classes/Game_Battler.html#method-i-remove_states_auto" name="method-i-remove_states_auto" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>状态的自动解除 timing : 时机（1:行动结束 2:回合结束）</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_states_auto_source')" id="l_method-i-remove_states_auto_source">show</a>
                
              </p>
              <div id="method-i-remove_states_auto_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 203</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_states_auto</span>(<span class="ruby-identifier">timing</span>)
  <span class="ruby-identifier">states</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">state</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@state_turns</span>[<span class="ruby-identifier">state</span>.<span class="ruby-identifier">id</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">auto_removal_timing</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">timing</span>
      <span class="ruby-identifier">remove_state</span>(<span class="ruby-identifier">state</span>.<span class="ruby-identifier">id</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_states_by_damage">
            
              <b>remove_states_by_damage</b>()
            
            <a href="../classes/Game_Battler.html#method-i-remove_states_by_damage" name="method-i-remove_states_by_damage" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>受到伤害时解除状态</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_states_by_damage_source')" id="l_method-i-remove_states_by_damage_source">show</a>
                
              </p>
              <div id="method-i-remove_states_by_damage_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 218</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_states_by_damage</span>
  <span class="ruby-identifier">states</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">state</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">remove_by_damage</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rand</span>(<span class="ruby-number">100</span>) <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">chance_by_damage</span>
      <span class="ruby-identifier">remove_state</span>(<span class="ruby-identifier">state</span>.<span class="ruby-identifier">id</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-reset_state_counts">
            
              <b>reset_state_counts</b>(state_id)
            
            <a href="../classes/Game_Battler.html#method-i-reset_state_counts" name="method-i-reset_state_counts" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>重置状态计数（回合数或步数）</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-reset_state_counts_source')" id="l_method-i-reset_state_counts_source">show</a>
                
              </p>
              <div id="method-i-reset_state_counts_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 94</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">reset_state_counts</span>(<span class="ruby-identifier">state_id</span>)
  <span class="ruby-identifier">state</span> = <span class="ruby-identifier">$data_states</span>[<span class="ruby-identifier">state_id</span>]
  <span class="ruby-identifier">variance</span> = <span class="ruby-number">1</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">state</span>.<span class="ruby-identifier">max_turns</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">min_turns</span>, <span class="ruby-number">0</span>].<span class="ruby-identifier">max</span>
  <span class="ruby-ivar">@state_turns</span>[<span class="ruby-identifier">state_id</span>] = <span class="ruby-identifier">state</span>.<span class="ruby-identifier">min_turns</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">rand</span>(<span class="ruby-identifier">variance</span>)
  <span class="ruby-ivar">@state_steps</span>[<span class="ruby-identifier">state_id</span>] = <span class="ruby-identifier">state</span>.<span class="ruby-identifier">steps_to_remove</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-revive">
            
              <b>revive</b>()
            
            <a href="../classes/Game_Battler.html#method-i-revive" name="method-i-revive" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>复活</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-revive_source')" id="l_method-i-revive_source">show</a>
                
              </p>
              <div id="method-i-revive_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 116</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">revive</span>
  <span class="ruby-ivar">@hp</span> = <span class="ruby-number">1</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@hp</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-state_addable-3F">
            
              <b>state_addable?</b>(state_id)
            
            <a href="../classes/Game_Battler.html#method-i-state_addable-3F" name="method-i-state_addable-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>判定状态是否可以附加</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-state_addable-3F_source')" id="l_method-i-state_addable-3F_source">show</a>
                
              </p>
              <div id="method-i-state_addable-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 66</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">state_addable?</span>(<span class="ruby-identifier">state_id</span>)
  <span class="ruby-identifier">alive?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">$data_states</span>[<span class="ruby-identifier">state_id</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">state_resist?</span>(<span class="ruby-identifier">state_id</span>) <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-operator">!</span><span class="ruby-identifier">state_removed?</span>(<span class="ruby-identifier">state_id</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">state_restrict?</span>(<span class="ruby-identifier">state_id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-state_removed-3F">
            
              <b>state_removed?</b>(state_id)
            
            <a href="../classes/Game_Battler.html#method-i-state_removed-3F" name="method-i-state_removed-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>判定状态是否已被解除</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-state_removed-3F_source')" id="l_method-i-state_removed-3F_source">show</a>
                
              </p>
              <div id="method-i-state_removed-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 71</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">state_removed?</span>(<span class="ruby-identifier">state_id</span>)
  <span class="ruby-ivar">@result</span>.<span class="ruby-identifier">removed_states</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">state_id</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-state_restrict-3F">
            
              <b>state_restrict?</b>(state_id)
            
            <a href="../classes/Game_Battler.html#method-i-state_restrict-3F" name="method-i-state_restrict-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>判定状态是否受到行动限制影响而无法附加</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-state_restrict-3F_source')" id="l_method-i-state_restrict-3F_source">show</a>
                
              </p>
              <div id="method-i-state_restrict-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 75</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">state_restrict?</span>(<span class="ruby-identifier">state_id</span>)
  <span class="ruby-identifier">$data_states</span>[<span class="ruby-identifier">state_id</span>].<span class="ruby-identifier">remove_by_restriction</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">restriction</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update_buff_turns">
            
              <b>update_buff_turns</b>()
            
            <a href="../classes/Game_Battler.html#method-i-update_buff_turns" name="method-i-update_buff_turns" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更新强化／弱化的回总数数</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_buff_turns_source')" id="l_method-i-update_buff_turns_source">show</a>
                
              </p>
              <div id="method-i-update_buff_turns_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 186</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update_buff_turns</span>
  <span class="ruby-ivar">@buff_turns</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">param_id</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@buff_turns</span>[<span class="ruby-identifier">param_id</span>] <span class="ruby-operator">-=</span> <span class="ruby-number">1</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buff_turns</span>[<span class="ruby-identifier">param_id</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update_state_turns">
            
              <b>update_state_turns</b>()
            
            <a href="../classes/Game_Battler.html#method-i-update_state_turns" name="method-i-update_state_turns" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更新状态的回总数数</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_state_turns_source')" id="l_method-i-update_state_turns_source">show</a>
                
              </p>
              <div id="method-i-update_state_turns_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 180</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update_state_turns</span>
  <span class="ruby-identifier">states</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">state</span><span class="ruby-operator">|</span>
    <span class="ruby-ivar">@state_turns</span>[<span class="ruby-identifier">state</span>.<span class="ruby-identifier">id</span>] <span class="ruby-operator">-=</span> <span class="ruby-number">1</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@state_turns</span>[<span class="ruby-identifier">state</span>.<span class="ruby-identifier">id</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-use_item">
            
              <b>use_item</b>(item)
            
            <a href="../classes/Game_Battler.html#method-i-use_item" name="method-i-use_item" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>技能／使用物品
对使用目标使用完毕后，应用对于使用目标以外的效果。</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-use_item_source')" id="l_method-i-use_item_source">show</a>
                
              </p>
              <div id="method-i-use_item_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Battler.rb, line 313</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">use_item</span>(<span class="ruby-identifier">item</span>)
  <span class="ruby-identifier">pay_skill_cost</span>(<span class="ruby-identifier">item</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">Skill</span>)
  <span class="ruby-identifier">consume_item</span>(<span class="ruby-identifier">item</span>)   <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">Item</span>)
  <span class="ruby-identifier">item</span>.<span class="ruby-identifier">effects</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">effect</span><span class="ruby-operator">|</span> <span class="ruby-identifier">item_global_effect_apply</span>(<span class="ruby-identifier">effect</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    